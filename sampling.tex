\section{Selecting Records to Clean}\label{dist-samp}
The algorithm proposed in Section \ref{update-alg} will convege for 
any sampling distribution where  $p(\cdot) > 0$ for all records, albeit different distributions will have different convergence rates.
\sys uses a sampling algorithm that selects the most valuable records from $R_{dirty}$ to clean with higher probability. 

\subsection{Optimal Sampling Problem}
Recall that the convergence rate of an SGD algorithm is bounded by $\sigma^2$ which is the variance of the gradient.
Intuitively, the variance measures how accurately the gradient is estimated from a uniform sample.
Other sampling distributions, while preserving the sample expected value, may have a lower variance.
Thus, the optimal sampling problem is defined as a search over sampling distributions to find the minimum variance sampling distribution.

\begin{definition}[optimal Sampling Problem]
Given a set of candidate dirty data $R_{dirty}$, $\forall r \in R_{dirty}$ find sampling probabilities $p(r)$ such that over all samples $S$ of size $k$ it minimizes the variance:
\[
\arg\min_p \mathbb{E}(\|g_S - g^*\|^2)
\]
\end{definition}

It can be shown~\cite{zhao2014stochastic} that the optimal distribution over records in $R_{dirty}$ is probabilities proportional to:
\[
p_i \propto \|\nabla\phi(x^{(c)}_i,y^{(c)}_i,\theta^{(t)})\|
\]
The problem is that the optimal distribution leads to a chicken-and-egg problem:
the optimal sampling distribution requires knowing $(x^{(c)}_i,y^{(c)}_i)$, which are the clean values, however we are sampling the values so that they can be cleaned.

Since we do not know the clean values, and one solution is to use the gradient w.r.t the dirty data:
\[
p_i \propto \|\nabla\phi(x^{(d)}_i,y^{(d)}_i,\theta^{(t)})\|
\]
It turns out that this solution is highly related to the Expected Gradient Length heuristic \cite{settles2010active}.
We show that we can do significantly better by using the detector results to estimate the impact of data cleaning, thereby approximating the optimum.
Note that as long as every record gets sampled, the algorithm will still converge.




